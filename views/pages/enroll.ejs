<%- include("../partials/header.ejs") %>
<main class="main">

  <!-- breadcrumb -->
  <div class="site-breadcrumb" style="background: url(assets/img/breadcrumb/01.jpg)">
    <div class="container">
      <h2 class="breadcrumb-title">Application Form</h2>
      <ul class="breadcrumb-menu">
        <li><a href="index.html">Home</a></li>
        <li class="active">Application Form</li>
      </ul>
    </div>
  </div>
  <!-- breadcrumb end -->


  <!-- application -->
  <div class="application py-120">
    <div class="container">
      <div class="application-form">
        <h3>Application Form</h3>
        <form method="POST" enctype="multipart/form-data">
          <% if(alert.status === "error") { %>
          <div class="alert alert-warning alert-dismissible fade show" role="alert">
            <strong>Error!</strong> <%= alert.message %>.
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          <% } %>
          <% if(alert.status === "success") { %>
          <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>Success!</strong> <%= alert.message %>.
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          <% } %>

          <div class="row">
            <h5 class="mb-3">Student's Profile</h5>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="firstName">First Name</label>
                <input id="firstName" type="text" class="form-control" name="firstName" placeholder="Your First Name" value="<%= form.firstName %>">
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="middleName">Middle Name</label>
                <input id="middleName" type="text" class="form-control" name="middleName" placeholder="Your Last Name" value="<%= form.middleName %>">
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="lastName">Last Name</label>
                <input id="lastName" type="text" class="form-control" name="lastName" placeholder="Your Last Name" value="<%= form.lastName %>">
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="academicYear">Academic Year</label>
                <select name="academicYear" class="form-select" name="academicYear" <%= academicYears.length > 0 ? "" : "disabled" %>>
                  <option selected disabled hidden>Choose Academic Year</option>
                  <% if(academicYears.length > 0){ %>
                  <% academicYears.forEach(academicYear => { %>
                  <option value="<%= academicYear %>" <%= form.academicYear === academicYear ? "selected" : "" %>><%= academicYear %></option>
                  <% }) %>
                  <% } else { %>
                  <option selected disabled hidden>No Academic Year Found</option>
                  <% } %>
                </select>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="country">Nationality</label>
                <select id="country" class="form-select" name="country" <%= countries.length > 0 ? "" : "disabled" %>>
                  <option selected disabled hidden>Choose Nationality</option>
                  <% if(countries.length > 0){ %>
                  <% countries.forEach(country => { %>
                  <option value="<%= country.isoCode %>" <%= form.country === country.isoCode ? "selected" : "" %>><%= country.name %></option>
                  <% }) %>
                  <% } else { %>
                  <option selected disabled hidden>No Country Found</option>
                  <% } %>
                </select>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="stateOfOrigin">State Of Origin</label>
                <select id="stateOfOrigin" class="form-select" name="stateOfOrigin" disabled>
                  <option selected disabled hidden>Choose State</option>
                </select>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="religion">Religion</label>
                <select id="religion" class="form-select" name="religion" <%= religions.length > 0 ? "" : "disabled" %>>
                  <option selected disabled hidden>Choose Religion</option>
                  <% if(religions.length > 0){ %>
                  <% religions.forEach(religion => { %>
                  <option value="<%= religion.name %>" <%= form.religion === religion.name ? "selected" : "" %>><%= religion.name %></option>
                  <% }) %>
                  <% } else { %>
                  <option selected disabled hidden>No Religion Found</option>
                  <% } %>
                </select>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="photo">Student Photo</label>
                <input id="photo" type="file" class="form-control" name="photo" aria-describedby="photohelp" accept="jpg,jpeg,png">
                <div id="photohelp" class="form-text">Your Photo Must be in Passport (PP) Size. Max Upload Size 1MB.</div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="dateOfBirth">Date Of Birth</label>
                <input id="dateOfBirth" type="date" class="form-control" name="dateOfBirth" value="<%= form.dateOfBirth %>">
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="gender">Gender</label>
                <select id="gender" class="form-select" name="gender" <%= genders.length > 0 ? "" : "disabled" %>>
                  <option selected disabled hidden>Choose Gender</option>
                  <% if(genders.length > 0){ %>
                  <% genders.forEach(gender => { %>
                  <option value="<%= gender %>" <%= form.gender === gender ? "selected" : "" %>><%= gender %></option>
                  <% }) %>
                  <% } else { %>
                  <option selected disabled hidden>No Gender Found</option>
                  <% } %>
                </select>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="class">Class</label>
                <select id="class" class="form-select" name="class" <%= classes.length > 0 ? "" : "disabled" %>>
                  <option selected disabled hidden>Choose Class</option>
                  <% if(classes.length > 0){ %>
                  <% classes.forEach(classItem => { %>
                  <option value="<%= classItem.id %>" <%= form.class === classItem.id ? "selected" : "" %>><%= classItem.name %></option>
                  <% }) %>
                  <% } else { %>
                  <option selected disabled hidden>No Classes Found</option>
                  <% } %>
                </select>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label id="examinationDate">Examination Date</label>
                <select id="examinationDate" class="form-select" name="examinationDate" disabled>
                  <option value="<%= examinationDate %>"><%= examinationDate %></option>
                </select>
              </div>
            </div>
            <div class="col-lg-12">
              <div class="form-group">
                <label for="address">Address</label>
                <textarea id="address" class="form-control" name="address" placeholder="Your Present Address"><%= form.address %></textarea>
              </div>
            </div>

            <h5 class="mt-4 mb-3">Parents/Guardians Profile</h5>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="guardianFirstName">First Name</label>
                <input id="guardianFirstName" type="text" class="form-control" name="guardianFirstName" placeholder="Your First Name" value="<%= form.guardianFirstName %>">
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="guardianMiddleName">Middle Name</label>
                <input id="guardianMiddleName" type="text" class="form-control" name="guardianMiddleName" placeholder="Your Last Name" value="<%= form.guardianMiddleName %>">
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="guardianLastName">Last Name</label>
                <input id="guardianLastName" type="text" class="form-control" name="guardianLastName" placeholder="Your Last Name" value="<%= form.guardianLastName %>">
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="guardianPhoneNumber">Phone Number</label>
                <input id="guardianPhoneNumber" type="text" class="form-control" name="guardianPhoneNumber" placeholder="Your Last Name" value="<%= form.guardianPhoneNumber %>"><%= form.guardianPhoneNumber %>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="guardianEmail">Email</label>
                <input id="guardianEmail" type="email" class="form-control" name="guardianEmail" placeholder="Your Email Address" value="<%= form.guardianEmail %>">
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label id="relationshipToStudent">Relationships to student</label>
                <select id="relationshipToStudent" class="form-select" name="relationshipToStudent" <%= relationships.length > 0 ? "" : "disabled" %>>
                  <option selected disabled hidden>Choose Relationship</option>
                  <% if(relationships.length > 0){ %>
                  <% relationships.forEach(relationship => { %>
                  <option value="<%= relationship.name %>" <%= form.relationshipToStudent === relationship.name ? "selected" : "" %>><%= relationship.name %></option>
                  <% }) %>
                  <% } else { %>
                  <option selected disabled hidden>No relationship Found</option>
                  <% } %>
                </select>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="form-group">
                <label for="guardianOccupation">Occupation</label>
                <select id="guardianOccupation" class="form-select" name="guardianOccupation" <%= occupations.length > 0 ? "" : "disabled" %>>
                  <option selected disabled hidden>Choose Occupation</option>
                  <% if(occupations.length > 0){ %>
                  <% occupations.forEach(occupation => { %>
                  <option value="<%= occupation %>" <%= form.guardianOccupation === occupation ? "selected" : "" %>><%= occupation %></option>
                  <% }) %>
                  <% } else { %>
                  <option selected disabled hidden>No Occupation Found</option>
                  <% } %>
                </select>
              </div>
            </div>
            <div class="col-lg-12">
              <div class="form-group">
                <label for="guardianAddress">Address</label>
                <textarea id="guardianAddress" class="form-control" name="guardianAddress" placeholder="Your Present Address"><%= form.guardianAddress %></textarea>
              </div>
            </div>

            <h5 class="mt-4 mb-2">Payment Information</h5>
            <p class="mb-3">2025/2026 ENTRANCE EXAMINATION FORM</p>
            <p class="mb-3">Pay the sum of: NGN1,500</p>

            <ul class="list-group mb-3">
              <li class="list-group-item">
                <strong>Account Number:</strong>
                <span id="accountNumber">1228721078</span>
                <button class="btn btn-secondary btn-sm" id="copyButton" type="button">Copy</button>
              </li>
              <li class="list-group-item">
                <strong>Account Name:</strong> Diamond Schools Nkpor
              </li>
              <li class="list-group-item">
                <strong>Bank Name:</strong> Zenith Bank
              </li>
              <li class="list-group-item">
                <strong>Account Type:</strong> Savings
              </li>
              <li class="list-group-item">
                <div class="form-group">
                  <label for="paymentProof"><b>Payment proof:</b></label>
                  <input id="paymentProof" type="file" class="form-control" name="paymentProof" aria-describedby="paymentProof" value="<%= form.paymentProof %>">
                  <div id="photohelp" class="form-text">
                    Max Upload Size 1MB.
                  </div>
                </div>
              </li>
            </ul>


            <div class="col-lg-12">
              <div class="form-check">
                <input id="agree" class="form-check-input" type="checkbox" name="agree" <%= form.agree === "on" ? "checked" : "" %>>
                <label for="agree" class="form-check-label">
                  By Submitting This Form You Agree To The <a href="#">Terms & Conditions</a> And <a href="#">Privacy Policy</a>.
                </label>
              </div>
            </div>

            <div class="col-lg-12">
              <button type="submit" class="theme-btn">Submit Application<i class="fas fa-arrow-right-long"></i></button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- application end-->

  <script>
    const states = JSON.parse(`<%- JSON.stringify(states) %>`);
    const form = JSON.parse(`<%- JSON.stringify(form) %>`)
  </script>


</main>
<%- include("../partials/footer.ejs") %>